# 基于 STM32 和 FreeRTOS 的蓝牙和传感器电机控制项目
本项目是一个基于 STM32、FreeRTOS、传感器和蓝牙通信的电机控制项目。项目中的代码主要集成在`freertos.c`文件中，程序的主要功能包括:
- 蓝牙通信: 通过 UART3 端口，该任务负责与外部设备（如手机）进行蓝牙通信，接收和发送数据。
- 数据管理: 该任务负责从传感器队列读取数据，然后根据需要将数据发送给电机控制任务或通过蓝牙发送给外部设备。
- 传感器通信: 通过 UART2 端口，该任务负责与外部传感器进行通信，获取传感器数据，并将数据推送到消息队列。
- 电机控制: 该任务负责根据需要更新电机状态，通过 PID 控制算法调整电机转速，以达到所需压力。

## 主要任务的实现
- 蓝牙通信任务 (BLECommunicationEntry): 在无限循环中，任务等待 UART3 端口的数据，并进行处理。当接收到完整的数据帧时，根据收到的命令进行相应的处理。
- 数据管理任务 (DataManagerEntry): 在无限循环中，任务等待从传感器队列读取的数据，并根据需要将数据发送给电机控制任务或通过蓝牙发送给外部设备。
- 传感器通信任务 (SensorCommunicationEntry): 在无限循环中，任务等待 UART2 端口的数据，并进行处理。当接收到数据后，将数据推送到传感器队列。
- 电机控制任务 (MotorControlEntry): 在无限循环中，任务根据需要更新电机状态，使用 PID 控制算法调整电机转速，以达到所需压力。

## 中断处理
程序中也包含了一些中断处理函数，例如串口接收完成中断回调 (HAL_UART_RxCpltCallback) 和串口发送完成中断回调 (HAL_UART_TxCpltCallback)。

## 文件说明

### 蓝牙模块
- PB02.h：PB02蓝牙模块的头文件，定义了对PB02蓝牙模块的操作，包括发送和接收AT指令、获取和设置MAC地址等。
- BLE_Test.h：定义了蓝牙测试模块的头文件，包含了蓝牙通信的相关指令以及相应的处理函数接口。

### 电机控制模块
- Motor.h：电机控制模块的头文件，定义了对电机的操作和控制，包括设置电机的状态、PWM值等。
- PID_Controller.h：PID控制器的头文件，定义了PID控制器的实现，包括设定控制参数、测量误差等。

### 主控模块
- Master.h：主控制模块的头文件，定义了对传感器的控制，包括读取和发送注册输入、处理Modbus指令等。